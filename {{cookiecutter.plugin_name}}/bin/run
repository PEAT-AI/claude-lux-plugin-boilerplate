#!/usr/bin/env bash
# Entry point wrapper for {{cookiecutter.plugin_display_name}}
#
# This script activates the virtual environment and runs the plugin CLI.
# Point Claude Code to this script for commands that need venv activation.

set -e

# Get the directory containing this script
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Plugin root is one level up
PLUGIN_DIR="$(dirname "$SCRIPT_DIR")"

# Check if venv exists
if [ ! -d "$PLUGIN_DIR/.venv" ]; then
    echo "Error: Virtual environment not found. Run 'make install' first." >&2
    exit 1
fi

# Activate venv and run CLI
source "$PLUGIN_DIR/.venv/bin/activate"
exec python -m {{cookiecutter.plugin_name}}.cli "$@"
